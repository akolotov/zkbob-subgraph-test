// SPDX-License-Identifier: UNLICENSED
pragma solidity 0.8.15;

import "forge-std/Script.sol";
import "../src/Pool.sol";
import "../src/DD.sol";

address constant sender_39f0 = address(0x39F0bD56c1439a22Ee90b4972c16b7868D161981);
bytes10 constant a00_diversifier = 0x896140c8662c04cde6d5;
bytes32 constant a00_pk = 0x0bab9e6cf2ffb0d4d8297111718160f85a282073c6dda7919437dece7791ad6a;
bytes10 constant a01_diversifier = 0x7cdf58abe8c9d144eafc;
bytes32 constant a01_pk = 0x2aa4468b8befa0729051b8a56d4c17dc981433d062f63289b9b4a88e2b694d10;

contract SimulatePoolTransactions is Script {
    function transact(Pool pool, bytes memory data) internal {
        address(pool).call(
            abi.encodePacked(
                pool.transact.selector,        
                data
            )
        );
    }

    function appendDirectDeposits(Pool pool, bytes memory data) internal {
        address(pool).call(
            abi.encodePacked(
                pool.appendDirectDeposits.selector,        
                data
            )
        );
    }

    function data00() internal pure returns(bytes memory data){
        data = hex"127afd714d54fb13106763537e7d0e3e93716e2fa8ad20de8b2e51f853721b92275eed3c4e0f9aec0ff09862e2fc365e6f014c6d903be7dcca21e61d98e07fe0000000000000000000000000000000000000000000000000009896800556617970acc2daad0b31070e725d8cbe97fba9f8881b24e87cbacc81fcb93b1a5453222ecf4dca2bd2b61e4c8e63f2cb96bce690ea75d635f7507bac1ef11c07919ad21f3bac3b585e493db02200f2051cbacdda2e9a2b70806f2114e0a4761c03609ca52ea1004a824450fef883ce60b9037f8b512e074e0fd0ee7b20fbc226b9ffb97c6fbbccc64d9c4e896e46542f1aabbd63d4312759636a53d0f233050b02525f84924147a93814accb6759f2744453f0896e394fe89759205b1a9e340c187a27aa7ade04a2fdd755127df0358540db5fa8c3b2fd28a941d77b70c417256602a9ff17d592b5a0fd393c70636d835d41d23fac36232a2461ace396844318fd85fea5f4afc0e0e80653ce6d9828243f6fe9df3e8199f7b6b4c3f0084e11057fc1573153b8b6a2e16830f64ebc6deb2929a377c0aa62e85d122e963d3e5904c60004942d2c218f3af3696d57060bf0f079bcfe1190e8c2efe8d980aff8d6186237fb3288d784714e5f303842ba5f22d18e091d7d1ca9a2a183484a8b970e0b618dbfa0b4634fe95906c742fba30a3dbd46f02846f73d18a109e15bbeadc5089a978a56bd6bb2d2b85fd0de91db36de6060d012b7f217c6e6a63de0db83c02c9f32a716baa1dafce9d461a8c4266edf4b4e9f69133059da10ed41a54d591214af922563be2aea24929697f2b9f85a875065147200bd8206ab367d42b6d7c1226288b0f94a4e147f63ba2b6e1b6a779eeb06664982ede468b4a1f054b0d6f3000300ee000000000001f69000000000649b7f1e3d4683d7a158a16cccda726fa651deac5d04f74601000000bf5009289c8a8922064d5034a8daf19310a4ce43d0c816b78c80a2d8cad3ff2d6da48e2e23d1c88cf283ededd170f009803688a534b7c92a5ceab4c3f3aaf512b706aa5b8d29f55d9ed9b9c25983833529ed06705d01b1f77fb071012c09b8850852d9a6da240920c99c8df853d13a9e7769daf26a1c464c8dd3c1127686be81c3846b57fa7f95e20069d9eb66feab45b2188ced3f52758ce3b241df523f06f5dc619bd08557b9ec5e8aa41323dd69541d00b44aa824b10d42932579fd3b547c5981f0556f362e3aba413604da5638ab8932b4dc0c8000b68a2ad567637f4ca8e63668f36cb5fd858123203e5ec43eb84c869a48ae94e1a2871c28cb81153e4cb6ce6436d7ab";
    }

    function data01() internal pure returns(bytes memory data){
        data = hex"111fd13c8f35ae69dbfba7097a10eea7311bf3c2a30267d42ad8736870e7061415961678a5e3b506c3e96054290f561a71972c2b2764d92a3e8385f2f01f3fa80000000000800000000000000000000000000000000000000098968008f9968fe65cb113d243d80daf51e60dcd0d113fe055ac88a4ec4fecb7544464277567d5a3fa50cc544003fe9d9dd3e854f2d54d52157bae0977a460a54348460f110d0923aabbcd5edb6b3ad95bca2c4b98712f7a528dfa13b88dc8b420b3d4047caf04bfeddb110d2746602f35a2e5975cf92eebca57557f9fd5fd89cdf99d0384ce41938e2d609e68bec449bb7b0b5dd87f49f8ae323bb039a35907d6ccfb19947044d33d9150ba649b305b09086f6ca253fefc68351169df8ead208b9b7c0244b2253a7a5d886041538f0723050e130260b96626d6bd71429e5313f376ec29e8588695ab4cb1901c34ae9295470e41af9ee53d3ec15d77ee468b991edaf105ba3e3738ba351fba1f2a20a5150593317b28c75cdffd2cbb5b03a722d220e516616d6a121a821350d826980f5868485198623b4c5a7f2c4e2644193c41d54c00c94876d433d0e1b2d5814f02076eb7cbc26613410de9c6e735a426162c0f19235532f053c360e395e562875d1f369932d895cbda27e1d0b1f0114df80681c520e83aaafce25c686c53899cd4bca38fc43171173d68da13962ac2c18eeac2091aee781e848122dbabcdebae9e79de77c9119d92557636a8c86df2985e29be671996bbb1c1067761c3119ceaf7b01688def763cfe0ba1af7801fb14c894a0dbe2872376e0493cc4dd7b6b8ea220babc2d880a98c29e7d6bd0c5e95d428a02789250c8dad33dea66a645c947b76315f3954929130d1496078a0ade42fb6514e97000300ee000000000001cdeb00000000649b81803d4683d7a158a16cccda726fa651deac5d04f7460100000096e0f2af320df0ba91a0fb1738947f3a7dc36178973055ec74e5095cfacc8525ef81b8816adfb7c4cab763694b8aa81ad08213e054523cd248b1112c8b3d5d2a8e074965f8828fe49e6b9fbac7bf1fd189f3460f94315a3f7c79a7d164b43639aa8e5e48b59a5b9f5945fd1c8eaaf6d3be4bb7e7d506c730d4d38b64860bfc118e7d360b8cc294372300df6af1a1113960b1c4a61285910f7ba6d9ab703589810f28b9dff1ef371585d34665a9e944ac1a97d9c5d442661e7575269468895d557d2bedd122920560148ca4d975129a2c3b60504161f752f0c940a4f42db808037da899b6d51d0b62f9421170a4edaf8b34f8f79573244016cd58ab5e385947802d1dc9a3334e";
    }

    function data02() internal pure returns(bytes memory data){
        data = hex"197bbac6570ac5af2bd4ebd26e5938a70c5aca41415c12709b6d3a043609475702f06411f838cd0146b494fe33415712e6e82386dd11f26b8e72b20079accfa60000000001000000000000000000000000000000ffffffffff1968b01f210a943b279945654f4ee52a2989ad09434f248a41cbe246664fd9e82079aa07e9956acd56fa6ce25cbd87c73f011fcd02a3c2bef5b0af66b68c303850e8c1133d76cf9572752104ae67bbdc72327f5c7a83f755e8f4f00ee287f3f071c458079c70c103c7c632bfca6faec2e4baabffe215b9a96b293ed87e3b3b3cd0b8401422c0ff5bc063ac2c54e9b1b8babd7f338878134e82151192a5e03fc133fdec080f3ce78301811a6c8ffb9fbfd32e94ef3df0db95381ef31923144f30da8c030d8fc2d10460243d3e0912a1f0955135a052672643ef7d8b67795ae11e59d6631c281b1839343f4ecdcf9310e660233af60544890fa1a974406b9226124252b2267c1d932e7742d2741a8e42310e7dc4ea41e6c5e55c5c58770790045b2f5aa313e8e785c07c4ee4c1f7e53ae53a18349980753fe440d945db40b219d9a6638a22cae62d4b297e9c4a8693df717286b6f051f8b2d49c02402fd46c549e180ca1296151a405ea12e3cdd41bcfda0df2ee4df8a429b5ee12dec5dcba24f22f9a02060d48280c169af41693c6b62c56b417e618af5bcb01f382ff2c67538bc419a20ab719bca3c0641fc366a37e32deb548e3704831e3d1b00e3072d64eccbac3a12317042cb0c9b674ce0ad8d21ce1191759f5488528622fdcb2a2282cef7b231223f4a50f52ed6ddf58fce11ac87ae8e86ec5e862d937677e8de1495fd1cb436518fb5c263e213bceb5ddd021a996b84724c1b8fdb74d6364d061bb2094b534c2000200ee000000000001b59000000000009896803d4683d7a158a16cccda726fa651deac5d04f74601000000774886b73cdab8b8a68a7301560b2646c7656448e862543b80df3ffbb660f72970a9c8fb1f56ed3cb6d89acc4a02c988aa7d5dabee4e779330358c9ace56b90faf9d1ad272fa71c8f3f2e9f5b6ea3c49246cf65edf565e31b452b688f698c7025a2f7493be2120e3afeb81e5ef13c2b3c9c5ee375c7814459d428ec7862842344320e50fb5c7c8ce3c413f15715189776fc0841075fbd2f9661f86f111e992fe201beac21c32e6c3766cbc0341700ca3f9d9902d7af492c0023b4e99cca4b2f166c47bed6d36";
    }

    function data03() internal pure returns(bytes memory data){
        data = hex"0a40e55e078a690d5957601ace0edb9a752aaddafe97f6974257214aacee7e9a0dd3852c66ba77e988e1c2165e8434f5e49066466bc94825b041297fd8ac1792000000000180000000000000000000000000000000000000009896802736d1920e824b9c13f9b3348c4513ef39df992c41f54ff549403115c31d350803c670612aebb85b0c8231ae233ae304829f7625a923dac96cdfc57952069c70103fb8fc14315f1a29852aba7a91824ba61e91c654fa4e4a818f6c0118102425082aa6fab844baad6feb1674ebfa3516743b15e36f50c268fe1d22697a6a126d0bc6cad6fa11a09beade587dced922c9a060af7316aab64ed452987e34cde8431ddce596fae67221ca42d055d5a36b5b95740507725013d363eee1d855698f1114d043b4bba08df1126131f2ebea6deb787175f4b8893c9cf46a4d444b6aa38525227d4a2d0f73a85be4b9fa4e71e4453e1b5399e20b8566ef7a38550cc18ec114e19e8afe70333a411a38355d61b6480a8e4f9fddca6bb314f78b57a3e35a510430f5da4ea67fbe95f687dbfe942265382460c037c35aab7fa2be7aef46e86d1954fe3fc62857a6429d9e34fb829b97d709984935279a0830289ca169ddc93606d688fa9ee60264d89d66ce86cae0d6fdc4f164435ad3d03ed13bfde3754d5b14e69efba952f368c75050a47f8b6245c1f31db346810055b4246890bfe7b386190abe10d3ae695d20d215ba006c87df0335bff54ab030595d381f789eaf41150a3fb589519faf2f9d0bc5e3e9c9c4d7ac4b654352784cb411bb89f6857efacb1e93bb70897456fe66f2e511f3ba182c37a2a5fb0f9dde3ded3f4e9dd9c648990434b2f4ece8420d406e24fe5ef01a8f0b5c8bfbfce373f305a713079991d580000300ee000000000002709300000000649b84013d4683d7a158a16cccda726fa651deac5d04f74601000000138c1a12a7cf3d4a6bc8723cfea2104eb588e1f59b734558bc0ce2199766bf1586646e6ad0947c0ece8b881888236c08c4d087392dcfc2a1686b538a3696510d34e233d019759a4971040c0717809e16f662f0c44c3631c98bc8f235789ee33cc9e6b4b79009cbb2d79be2e1eb168ffadc069d13cee0bfc7f1594f597354513c42b88364922ac8850e632b4ca7c7f786cf74a18d7f1e818238a8f91004155b6a70ce5030c8d6514c8d066e6e3907c3a64205a5a7a668f75580d63a1989bee6e173df2120b53dc443ddbe64dbdf303c49318533d4f5cf61815a71bfec08f66e9aa595cacd927c0435c507b2a27929ef1743a16be01ce9abac5940e30c6aa7760182c46dc40d36";
    }

    function data04() internal pure returns(bytes memory data){
        data = hex"03f790b93eda339e6809665c29f3fa5146defe75e980dabea1762c13fcd6bbb6286026d79f8f5a0aed5e46d780de034f1b27e9abfe9637b37dbb2aa25063d2c40000000002000000000000000000000000000000ffffffffff6484b0100ee12848194b9a518e40d21dd529ed34c8724be430a2bd7b9e349e430245221c4e2611ce77a51a0e5656a5f6ac215670b28452d5fd07f0f340c01fe1840fda2fb0e2f6921a3696dc515429590fff56b32d3f0cb78adedacdd29c179afcbe0c1496ac0acfa156dd95e6d5aea3eaa8e97513654cd65d61d2974649e1a16785032d1630bfe070a8d80fca003f61da2644e0317a339d592a4c641117a55abd98d8136eeecbfcccb6e1b5fd38a8d401f27711dbe77e4d50cf84f546939d1330b3c318ca75142b34b47aa153c9a0ab9f8197c7f53b15270988f162e2a7d7c41c94dd29eed42eac6bfc799ca5f154965fe1512e2193a835c5190ffd4c846522f0d6652a16bb62b574a5d25c0978ebea757b38223be5078855f048d6f894ff74dbf5402ac4afc338599904b246e6f68621b93eff9673210f47bd3aced61db4795f89952d592b20f1d88e43f93383bdb6f44589d956f91bc0131813e0f6f7ecbe57fad01db22a9c59f22b861872a220486aacd0ebf96662eee8cfc87002469e7211926a15822cf3ace08143529fe16f0ec3e014c40d112e6dada824f257e410014e4c7d15b3849d48439b1140be0823059ab77540e538b50952300bc77735db21652e3c1e46cfe89fc78a1d681957a96badf271c4cfe7d47b8125e4e044f7b78d83ec4021437fe743ec3f68e63796d12fb69798cf1aca0304b1b9e5b8ad98cded79beac1de0758344bedd2c4dc52779881cafd7e32f716f52673b25d733471def671663000200ee000000000002e4d000000000000000003d4683d7a158a16cccda726fa651deac5d04f746010000007113a73e3838b8530a8cae8f7496b9bba2f946ec26d682660a7ecfd68f9d63087018fcd6b3a4d83db9f83e9e8f839d3a6b397fc2d6fbfa41c88061a88e1725052101e03fa43a898f0997dcbb3b4b31240953531d08915ccfa12b628781e378f1b2220967924d8845943a58e2f3ea292b325891f0080cb40d2513b65ea28a156de5c461650ab5474f89b5f1fc8b0c710e092a11b179cfe723610b8b8e7e32ab520f2fda459260285f1a6d7a445853f44310c1177b8256b66c8e51f6d197f5c782126b5bf64e10";
    }

    function data05() internal pure returns(bytes memory data){
        data = hex"21acbb28c3e9c00086248b680da0f6ae55bbda8193af1b170b1b1c4b63ebd6d6000000000000000000000000000000000000000000000000000000000000026023e60a490766fa587322b9f6100e18e3df4ec8a7b2f2e65b6c56a40c1fc9c86f1e116716a5ebf8ad52eaa999484f1b86a5ac58fd16302579d337382fa196260a2abbc5a519197ccfe8081ad0e14770388ed2079e51b92eea1172bbc357f40b5f2b197dd68bfe238f49ad8a22d2a71dbd95595b54c17dd232059ad6e84ddcd19715193fdcd67e70d7f36b373f37c4cf99a83eb33caa7b284249f292bc8cb709fa04e126ae777c14ea2e1c82bbcb9d36874ea66480f6e7349445dc104dcf0a316f057f282e62eb8097353cc3725d90c81c5afa990b36f11d738ff476f760f25a231a59f21f97696bbd5998b13f962cde49d0b3821a35a5e029f64fd14e6c85211a0ac2a3831f3e4d5059dfe6fd505d62a3612557b1450eff72a50a291eaa5ab0211e423915b437c40b0e27d70fe6c314dfd124886a5e4ccdb10643ecfa41c9b143273f57bf50545b7d38e1a94b0ec03349286f22c07befc84bd79f191915ad11451df64e06e62ac3f39564dd65b23619d22bc9f3c0994fbf254e6b21cb9419a35b2e4348b734bd6a83bebc5cb5957710f8114a6a40a0539ebaebb2b1435fd95d6c035338b4a728c42005decb59de60a0602dba0649944a8bbd1d6701351b7ded222a27216cf90c2c243a0dc0c5fd3ef3aa61f3501d499e620a01270d7d222e84c82c746f6b9d31aac67da59ff5ef94f48cd5812fbf65470ca53e5a0959bccec9ef2c0cedb8fd96bb7b8a26d954d723aaabae9c490dace533c9ad58f5b8067b6e6c00000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000000";
    }

    function data06() internal pure returns(bytes memory data){
        data = hex"12e41223258f19bb58f7639ba31904d6a7006cfffc9093c56e337034fd509a0100000000000000000000000000000000000000000000000000000000000002601601613b8e79c1682a5da2caa84f7272e821ce04a591fd0ccb04fd43a13ea8b722d92534fc2d754887c62bbfda888617d1df41728902984d7921a5fe919756e818cc415c053a511c21149d23316f38e80a45eb6e8fde79eea25f61e843d5c59209c434bf277a7a6b8dbab89c1687066d36a869205adf6b3aa3888fe64b6fc5521d2b634f247c36974054cde7bb2aee89f5a8bcb04afcb2d4429b9148b620e0b02d9cf53513e58a49dcb9beb35b560da705578f84e33eec48d8e5cf73050ea5422cfc6c371f0cbfd90de156a0c49dbe393f210704a9688c453e16929e5631c7ed19fb8d6edf357780f560153297d63da859a58af1e16fa97ce1b20892cf1e079f0f83dde248471d29381a05552b86504d00ee34929b4c3e8a9dcdffec87130c6e01ef70df5af0f4ffde0b38cb81adb642e6579dafecdeed79ff3851587e3bd8d02b735709ad8a1a2553f6eace398270d6c1a62f657b416acd635cdf5349430fa90bc5fb65c9be19e1d835fa86f3d89c00c9a7c6356333914cc0ee4b4b428d8e012612fb952396544d0d481c579b956ed5233dd9d91360355f8fd81b46dcde93351af55cdfcf2c820f90b0c10256476a787248cbc597343f16e5952a2d1d7a050e06f245730c452c83151a8a9e0ba2630a9b880d8479bba34aa7621586951ef9902f3e36a77afb35a424a23c431e624441816b9ac85d3dcef5bb615865b8f3691c0bd570a6d2fc2bba7cc7e92d05a03986b380361054ad756c76fb9ffa1e35904200000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000001";
    }

    function data10() internal pure returns(bytes memory data){
        data = hex"0fd2a33d4f65e1810ce8cc4387a3a63ee40d80899059d8139cd9e88a5471ad590fda2dc71ed7fc0cbe2fd49b3ab8f3d6a9e3825301c09fc7c1791cf084e4b5050000000005000000000000000000000000000000fffffffffffcfe802d583495608df3358b1a3866dd90485337c4d6256caee00ba8d167ab5a0eb9db0f1630bdbcb5486f8c01f4bf88e07325efddb142315c23533034bc18633d6e2204657d885b7af754167a7cc49788aaa52c3c40d3ca14dccb931670af57a6276f0334b413c3176ceae8337fe12901f6ed97dac48840585bdaf25f1e3eab5afcad024d4023ce5978caa85611d4509e7bc88f1d3ff1b3d570de0c57c2a245f94670256da9cfad42d9138352264e4bc70c6cdbf639bc3baa44161b241492f182b3e51e8bb55fb072857049196be0d212208805391754900a8b625e4ee9492d13762f2bf662dfd67dc94f71c3425b8a0e912c095e99ca54b953b4daf80661407389b00f788efef3638117e110a74544c7e0b0c98cdfea558fd1dc472ffebc611325e201db8af4fda4bd40be9b87a4883833e9948df2fc790d2b1d6904dea4958ab73e148c5e216c9b30df9114e2fc6f5d8d0e52412e0119c4c7e3e40a870fc78770b41c47b08d5a1bc2f96c92d4c1a9dacea78fe3dfea1771a5c1c1bd6d2e5e99473e2bfe98346624b50e59d570947465d3331616798ca82377fb8078a4564f497b712fe424282d7e026320e929dfc1b99be100ef9804b0747cdd120396967d6e2a8912cfbe300ca58605eacadc52df9cbfc8943e8b76ac664b401fd9786df99b8b74014f2d495b453cbd4a9300e157d44d7e14477f34a3cbd3f217250ae3846ac4b703e33258caaf0a7ceac5a9d48d8b7e2ec9bff0a0e1a13c170fe233c7f67caae10001017e000000000003018002000000435a89a11b8b83df9dd4575af7ef48d734f38c6b0b7681664e5d6beb90ead60b892c4c1b4b23ee2c14046ab3a4045dae6afbd5f6c1be813a1a52321970e83b29e8053d2284264a12bbb64bb25358a9c5eaae4fc585c47b3c735177f8c9e1990f04426acaa609dc4b05dcd0a8657f198cb00ed277bb9e139244ebc15da0b1934ed1c1b3dee542d3d8e51d5c27251f80f200fde36295c27fa5413c624724bb0ffb117394545cd41e9495ffff24d04ca67b6baf3e66d284d6afdb1133527e3ca6ea104e69331db3fe90722629d6f6c57674c29842d8a64a117737307b13f15c27152ca1dff578bc4424cde27af31b45aa4c96ed68bda7e48f8259e8d461d19f2aa9e68868811d674a2987fa3a15f2b48b273e6f6992466085503869934ce3d9da3c470188cc222d07671e7da90839d11cd47d4e13010f89da6144ef24b05e1cdf69dbfce83caffff62463168d2f6ff67f49c082b33980562518d07c67c5b465974eeb89407839b069597a7b0a2a920c8b260b63";
    }

    function run() public {
        vm.startBroadcast();

        DD dd = new DD();
        Pool pool = new Pool(address(dd));

        transact(pool, data00());
        transact(pool, data01());
        transact(pool, data02());
        transact(pool, data03());
        transact(pool, data04());

        dd.makeDD(sender_39f0, sender_39f0, a00_diversifier, a00_pk, 10000000); // nonce 0

        appendDirectDeposits(pool, data05());

        dd.makeDD(sender_39f0, sender_39f0, a01_diversifier, a01_pk, 10200000); // nonce 1

        appendDirectDeposits(pool, data06());

        transact(pool, data10());

        vm.stopBroadcast();

        console2.log("Pool contract:", address(pool));
    }
}
